{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>ğŸ”” PaziÅ†ojumu IestatÄ«jumi</h1>
    <p>Ievadi savu e-pastu un izvÄ“lies par kuriem priekÅ¡metiem vÄ“lies saÅ†emt atgÄdinÄjumus</p>
</div>

{% if error %}
<div class="alert alert-danger">
    âŒ {{ error }}
</div>
{% endif %}

{% if message %}
<div class="alert alert-success">
    {{ message }}
</div>
{% endif %}

<form method="POST" class="notification-form">
    <div class="settings-section">
        <h3>ğŸ“§ E-pasta adrese</h3>
        
        <div class="form-group">
            <label for="email">Tavs e-pasts:</label>
            <input type="email" id="email" name="email" 
                   required class="form-control"
                   placeholder="tavs.epasts@piemers.lv">
            <small class="form-text">
                â— Katru e-pastu var reÄ£istrÄ“t tikai VIENREIZ!
            </small>
        </div>
    </div>

    <div class="settings-section">
        <h3>â° AtgÄdinÄjuma laiks</h3>
        
        <div class="checkbox-group">
            <label class="checkbox">
                <input type="checkbox" name="notify_3_days" checked>
                ğŸ”” 3 dienas pirms darba
            </label>
            
            <label class="checkbox">
                <input type="checkbox" name="notify_1_day" checked>
                ğŸš¨ 1 diena pirms darba
            </label>
        </div>
    </div>

    <div class="settings-section">
        <h3>ğŸ“š PriekÅ¡meti</h3>
        <p>IzvÄ“lies par kuriem priekÅ¡metiem vÄ“lies saÅ†emt atgÄdinÄjumus:</p>
        
        <div class="subjects-checkbox">
            {% for subject in subjects %}
            <label class="checkbox subject-checkbox">
                <input type="checkbox" name="subject_{{ subject['name'] }}" checked>
                <span class="subject-color" style="background: {{ subject['color'] }}"></span>
                {{ subject['name'] }}
            </label>
            {% endfor %}
        </div>
        
        {% if not subjects %}
        <div class="alert alert-info">
            â„¹ï¸ VÄ“l nav pievienotu priekÅ¡metu. Vispirms pievieno priekÅ¡metus!
        </div>
        {% endif %}
    </div>

    <button type="submit" class="btn btn-success btn-lg">
        ğŸ’¾ ReÄ£istrÄ“t e-pastu un saglabÄt iestatÄ«jumus
    </button>
    
    <div class="form-note">
        <p>ğŸ“ <strong>PiezÄ«me:</strong> Katru e-pastu var reÄ£istrÄ“t tikai vienu reizi. 
           Ja vÄ“lies mainÄ«t iestatÄ«jumus, lÅ«dzu izmanto to paÅ¡u e-pastu.</p>
    </div>
</form>

<style>
.notification-form {
    max-width: 600px;
    margin: 2rem auto;
}

.settings-section {
    background: var(--card-bg);
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-radius: 12px;
    border: 1px solid var(--card-border);
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--card-border);
    border-radius: 8px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 1rem;
}

.form-text {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: 0.25rem;
}

.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 6px;
    transition: background 0.3s;
}

.checkbox:hover {
    background: var(--bg-secondary);
}

.subject-checkbox {
    padding: 0.75rem;
    margin: 0.25rem 0;
}

.subject-color {
    width: 16px;
    height: 16px;
    border-radius: 4px;
    display: inline-block;
}

.btn-lg {
    padding: 1rem 2rem;
    font-size: 1.1rem;
    width: 100%;
    margin: 1rem 0;
}

.form-note {
    background: var(--info-bg);
    padding: 1rem;
    border-radius: 8px;
    border-left: 4px solid var(--info-color);
    margin-top: 1rem;
}

.alert-info {
    background: var(--info-bg);
    border: 1px solid var(--info-color);
    color: var(--info-text);
    padding: 1rem;
    border-radius: 8px;
}
</style>
{% endblock %}