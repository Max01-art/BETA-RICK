{% extends "base.html" %}

{% block title %}Manage Subjects - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
    .manage-subjects {
        padding: 2rem 0;
    }
    
    .subjects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
    
    .subject-card {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        position: relative;
        transition: all 0.3s ease;
    }
    
    .subject-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    
    .subject-color {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }
    
    .subject-name {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }
    
    .subject-stats {
        display: flex;
        gap: 1rem;
        margin: 1rem 0;
        font-size: 0.85rem;
        color: var(--text-secondary);
    }
    
    .subject-actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
    }
    
    .btn-sm {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
        flex: 1;
    }
    
    .add-subject-card {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: white;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .add-subject-card:hover {
        transform: scale(1.05);
    }
    
    .add-icon {
        font-size: 3rem;
        margin-bottom: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container manage-subjects">
    <div class="page-header">
        <h1>ğŸ“š PÄrvaldÄ«t priekÅ¡metus</h1>
        <p>KopÄ: {{ subjects|length }} priekÅ¡meti</p>
    </div>

    <div class="subjects-grid">
        <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ -->
        <a href="{{ url_for('subjects.add') }}" class="subject-card add-subject-card">
            <div class="add-icon">â•</div>
            <strong>Pievienot jaunu priekÅ¡metu</strong>
        </a>

        <!-- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ² -->
        {% for subject in subjects %}
        <div class="subject-card">
            <div class="subject-color" style="background-color: {{ subject.color }};">
                {{ subject.name[0] }}
            </div>
            
            <div class="subject-name">{{ subject.name }}</div>
            
            {% if subject.description %}
            <p class="text-muted small">{{ subject.description[:80] }}{% if subject.description|length > 80 %}...{% endif %}</p>
            {% endif %}
            
            <div class="subject-stats">
                <span>ğŸ“ {{ subject.tests_count|default(0) }} testi</span>
                <span>ğŸ“– {{ subject.homework_count|default(0) }} mÄjasdarbi</span>
            </div>
            
            <div class="subject-actions">
                <a href="{{ url_for('subjects.detail', subject_name=subject.name) }}" class="btn btn-info btn-sm">
                    ğŸ‘ï¸ SkatÄ«t
                </a>
                <a href="{{ url_for('subjects.edit', subject_id=subject.id) }}" class="btn btn-warning btn-sm">
                    âœï¸ RediÄ£Ä“t
                </a>
                <form method="POST" action="{{ url_for('subjects.delete', subject_id=subject.id) }}" style="display: inline; flex: 1;" 
                      onsubmit="return confirm('DzÄ“st priekÅ¡metu {{ subject.name }}? Visi saistÄ«tie darbi tiks saglabÄti.')">
                    <button type="submit" class="btn btn-danger btn-sm" style="width: 100%;">ğŸ—‘ï¸</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}